{"ast":null,"code":"var _jsxFileName = \"/home/system2/testing-engine/testing-engine-fe/src/components/login/logindiv.jsx\";\nimport React from 'react';\nimport './logindiv.css';\nimport axios from 'axios';\nimport history from '../../history';\nimport swal from 'sweetalert';\n\nclass LoginDiv extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.check = e => {\n      console.log(this.state.email, this.state.password);\n\n      if (this.state.email !== \"admin\") {\n        console.log(this.props.role, this.props);\n\n        if (this.props.role == \"teacher\") {\n          console.log('hello');\n          this.ValidateEmail(this.state.email);\n          axios.post('http://localhost:5000/teacher/login', {\n            email: this.state.email,\n            password: this.state.password\n          }).then(res => {\n            console.log(res); // const users = res.data;\n\n            if (res.data.success === true) {\n              console.log('details verified');\n              console.log(res.data);\n              localStorage.setItem('user', JSON.stringify({\n                token: res.data.token\n              })); // this.props.history.push({ pathname: '/home' });\n            } else {\n              swal(\"invalid credentials\", \"retry again\", \"warning\");\n            }\n          });\n        } else if (this.props.role == \"student\") {\n          console.log('hello');\n          this.ValidateEmail(this.state.email);\n          axios.post('http://localhost:5000/student/login', {\n            email: this.state.email,\n            password: this.state.password\n          }).then(res => {\n            console.log(res); // const users = res.data;\n\n            if (res.data.success === true) {\n              console.log('details verified');\n              console.log(res.data.data.access);\n\n              if (res.data.data.access === true) {\n                localStorage.setItem('user', JSON.stringify({\n                  token: res.data.token\n                }));\n                this.props.history.push({\n                  pathname: '/home'\n                });\n              } else {\n                swal(\"you have registered successfully\", \"Wait until your access is approved\", \"info\");\n              } // this.props.history.push({ pathname: '/' });\n\n            } else {\n              swal(\"invalid credentials\", \"retry again\", \"warning\");\n            }\n          });\n        } else {\n          if (this.state.email === \"admin\" && this.state.password === \"admin\") {\n            console.log(\"admin\");\n            localStorage.setItem('admin', id);\n            this.props.history.push({\n              pathname: '/admin'\n            });\n          } else {\n            swal(\"invalid credentials\", \"retry again\", \"warning\");\n          }\n        }\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n  }\n\n  ValidateEmail(mail) {\n    if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)) {\n      return true;\n    }\n\n    swal(\"warning\", \"You have entered an invalid email address!\", \"warning\");\n    return false;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signpage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-75\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-alignment\",\n      name: \"email\",\n      placeholder: \"Email\",\n      onChange: e => this.handleChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 150\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-75\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-alignment\",\n      name: \"password\",\n      placeholder: \"Password\",\n      onChange: e => this.handleChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 159\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"send\",\n      className: \"buttonstyle\",\n      onClick: e => this.check(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 25\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"para\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    }, \"New user?\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"buttonstyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"line\",\n      href: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 57\n      }\n    }, \"Signup\")))));\n  }\n\n}\n\nexport default LoginDiv;","map":{"version":3,"sources":["/home/system2/testing-engine/testing-engine-fe/src/components/login/logindiv.jsx"],"names":["React","axios","history","swal","LoginDiv","Component","constructor","props","check","e","console","log","state","email","password","role","ValidateEmail","post","then","res","data","success","localStorage","setItem","JSON","stringify","token","access","push","pathname","id","handleChange","setState","target","name","value","mail","test","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './logindiv.css';\nimport axios from 'axios'\nimport history from '../../history';\nimport swal from 'sweetalert';\nclass LoginDiv extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: \"\",\n            password: \"\",\n        };\n    }\n\n    check = (e) => {\n        console.log(this.state.email, this.state.password)\n        if (this.state.email !== \"admin\") {\n            console.log(this.props.role, this.props)\n            if (this.props.role == \"teacher\") {\n                console.log('hello')\n                this.ValidateEmail(this.state.email)\n                axios.post('http://localhost:5000/teacher/login', { email: this.state.email, password: this.state.password })\n                    .then(res => {\n                        console.log(res);\n                        // const users = res.data;\n                        if (res.data.success === true) {\n                            console.log('details verified')\n                            console.log(res.data)\n                            localStorage.setItem('user', JSON.stringify({ token: res.data.token, }));\n                            // this.props.history.push({ pathname: '/home' });\n\n                        }\n                        else {\n                            swal(\"invalid credentials\", \"retry again\", \"warning\");\n                        }\n                    })\n            }\n\n            else if (this.props.role == \"student\") {\n                console.log('hello')\n                this.ValidateEmail(this.state.email)\n                axios.post('http://localhost:5000/student/login', { email: this.state.email, password: this.state.password })\n                    .then(res => {\n                        console.log(res);\n                        // const users = res.data;\n                        if (res.data.success === true) {\n                            console.log('details verified')\n                            console.log(res.data.data.access)\n                            if (res.data.data.access === true) {\n                                localStorage.setItem('user', JSON.stringify({ token: res.data.token }));\n                                this.props.history.push({ pathname: '/home' });\n\n                            }\n                            else {\n                                swal(\"you have registered successfully\", \"Wait until your access is approved\", \"info\")\n                            }\n                            // this.props.history.push({ pathname: '/' });\n                        }\n                        else {\n                            swal(\"invalid credentials\", \"retry again\", \"warning\");\n                        }\n                    })\n            }\n            else {\n                if (this.state.email === \"admin\" && this.state.password === \"admin\") {\n                    console.log(\"admin\")\n                    localStorage.setItem('admin', id);\n                    this.props.history.push({ pathname: '/admin' });\n\n                }\n                else {\n                    swal(\"invalid credentials\", \"retry again\", \"warning\");\n                }\n\n            }\n        }\n\n    }\n    handleChange = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    };\n    ValidateEmail(mail) {\n        if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)) {\n            return (true)\n        }\n        swal(\"warning\", \"You have entered an invalid email address!\", \"warning\")\n        return (false)\n    }\n\n    render() {\n        return (\n            <div className=\"signpage\">\n                <div className=\"container\">\n                    {/* {(this.props.value === 0) ? <h2 className=\"heading\">Student LOGIN</h2> : <h2 className=\"heading\">Teacher LOGIN</h2>} */}\n                    <div id=\"login\">\n                        {/* <div className=\"col-25\">\n                        <label htmlFor=\"fname\">Email</label>\n                    </div> */}\n                        <div className=\"col-75\">\n                            <input type=\"email\" className=\"form-alignment\" name=\"email\" placeholder=\"Email\" onChange={(e) => this.handleChange(e)} /><br /></div>\n                        {/* <div className=\"col-25\">\n                        <label htmlFor=\"fname\">Password</label>\n                    </div> */}\n\n                        <div className=\"col-75\">\n                            <input type=\"password\" className=\"form-alignment\" name=\"password\" placeholder=\"Password\" onChange={(e) => this.handleChange(e)} /><br />\n                        </div>\n\n                        <button id=\"send\" className=\"buttonstyle\" onClick={e => this.check(e)}>Login</button>\n                        <p className=\"para\">New user?</p>\n                        <button className=\"buttonstyle\"><a className=\"line\" href=\"/signup\">Signup</a></button>\n                    </div>\n\n                </div>\n            </div>\n        )\n    }\n}\nexport default LoginDiv;"]},"metadata":{},"sourceType":"module"}