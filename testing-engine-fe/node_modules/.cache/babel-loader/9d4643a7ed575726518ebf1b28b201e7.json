{"ast":null,"code":"var _jsxFileName = \"/home/system2/testing-engine/testing-engine-fe/src/components/login/logindiv.jsx\";\nimport React from 'react';\nimport './logindiv.css';\nimport { BrowserRouter as Router, Route, Switch, withRouter } from \"react-router-dom\";\nimport axios from 'axios';\nimport history from '../../history';\nimport swal from 'sweetalert';\n\nclass LoginDiv extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.check = e => {\n      // console.log(this.state.email, this.state.password)\n      if (this.state.email !== \"admin\") {\n        console.log(this.props.role, this.props);\n\n        if (this.props.role == \"teacher\") {\n          console.log('hello');\n          this.ValidateEmail(this.state.email);\n          axios.post('http://localhost:5000/teacher/login', {\n            email: this.state.email,\n            password: this.state.password\n          }).then(res => {\n            console.log(res); // const users = res.data;\n\n            if (res.data.success === true) {\n              console.log('details verified');\n              console.log(res.data);\n              localStorage.setItem('user', JSON.stringify({\n                token: res.data.token\n              })); // this.props.history.push({ pathname: '/home' });\n            } else {\n              swal(\"invalid credentials\", \"retry again\", \"warning\");\n            }\n          });\n        } else if (this.props.role == \"student\") {\n          console.log('hello');\n          this.ValidateEmail(this.state.email);\n          axios.post('http://localhost:5000/student/login', {\n            email: this.state.email,\n            password: this.state.password\n          }).then(res => {\n            console.log(res); // const users = res.data;\n\n            if (res.data.success === true) {\n              console.log('details verified');\n              const studentdata = res.data.data;\n\n              if (studentdata.Access === true) {\n                localStorage.setItem('user', JSON.stringify({\n                  token: res.data.token\n                })); // this.props.history.push({ pathname: '/home' });\n              } else {\n                swal(\"you have registered successfully\", \"Wait until your access is approved\", \"info\");\n              } // this.props.history.push({ pathname: '/' });\n\n            } else {\n              swal(\"invalid credentials\", \"retry again\", \"warning\");\n            }\n          });\n        }\n      } else {\n        if (this.state.email === \"admin\" && this.state.password === \"admin\") {\n          console.log(\"admin\");\n          localStorage.setItem('admin', \"admin\");\n          this.props.history.push({\n            pathname: '/Admin'\n          });\n        } else {\n          swal(\"invalid credentials\", \"retry again\", \"warning\");\n        }\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n  }\n\n  ValidateEmail(mail) {\n    if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)) {\n      return true;\n    }\n\n    swal(\"warning\", \"You have entered an invalid email address!\", \"warning\");\n    return false;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signpage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-75\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-alignment\",\n      name: \"email\",\n      placeholder: \"Email\",\n      onChange: e => this.handleChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 150\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-75\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-alignment\",\n      name: \"password\",\n      placeholder: \"Password\",\n      onChange: e => this.handleChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 159\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"send\",\n      className: \"buttonstyle\",\n      onClick: e => this.check(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 25\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"para\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }, \"New user?\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"buttonstyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"line\",\n      href: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 57\n      }\n    }, \"Signup\")))));\n  }\n\n}\n\nexport default withRouter(LoginDiv);","map":{"version":3,"sources":["/home/system2/testing-engine/testing-engine-fe/src/components/login/logindiv.jsx"],"names":["React","BrowserRouter","Router","Route","Switch","withRouter","axios","history","swal","LoginDiv","Component","constructor","props","check","e","state","email","console","log","role","ValidateEmail","post","password","then","res","data","success","localStorage","setItem","JSON","stringify","token","studentdata","Access","push","pathname","handleChange","setState","target","name","value","mail","test","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './logindiv.css';\nimport { BrowserRouter as Router, Route, Switch, withRouter } from \"react-router-dom\";\nimport axios from 'axios'\nimport history from '../../history';\nimport swal from 'sweetalert';\nclass LoginDiv extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: \"\",\n            password: \"\",\n        };\n    }\n\n    check = (e) => {\n        // console.log(this.state.email, this.state.password)\n        if (this.state.email !== \"admin\") {\n            console.log(this.props.role, this.props)\n            if (this.props.role == \"teacher\") {\n                console.log('hello')\n                this.ValidateEmail(this.state.email)\n                axios.post('http://localhost:5000/teacher/login', { email: this.state.email, password: this.state.password })\n                    .then(res => {\n                        console.log(res);\n                        // const users = res.data;\n                        if (res.data.success === true) {\n                            console.log('details verified')\n                            console.log(res.data)\n                            localStorage.setItem('user', JSON.stringify({ token: res.data.token, }));\n                            // this.props.history.push({ pathname: '/home' });\n\n                        }\n                        else {\n                            swal(\"invalid credentials\", \"retry again\", \"warning\");\n                        }\n                    })\n            }\n\n            else if (this.props.role == \"student\") {\n                console.log('hello')\n                this.ValidateEmail(this.state.email)\n                axios.post('http://localhost:5000/student/login', { email: this.state.email, password: this.state.password })\n                    .then(res => {\n                        console.log(res);\n                        // const users = res.data;\n                        if (res.data.success === true) {\n                            console.log('details verified')\n                            const studentdata = res.data.data\n                            if (studentdata.Access === true) {\n                                localStorage.setItem('user', JSON.stringify({ token: res.data.token }));\n                                // this.props.history.push({ pathname: '/home' });\n\n                            }\n                            else {\n                                swal(\"you have registered successfully\", \"Wait until your access is approved\", \"info\")\n                            }\n                            // this.props.history.push({ pathname: '/' });\n                        }\n                        else {\n                            swal(\"invalid credentials\", \"retry again\", \"warning\");\n                        }\n                    })\n            }\n        }\n        else {\n            if (this.state.email === \"admin\" && this.state.password === \"admin\") {\n                console.log(\"admin\")\n                localStorage.setItem('admin', \"admin\");\n                this.props.history.push({ pathname: '/Admin' });\n\n            }\n            else {\n                swal(\"invalid credentials\", \"retry again\", \"warning\");\n            }\n\n        }\n\n\n    }\n    handleChange = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    };\n    ValidateEmail(mail) {\n        if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)) {\n            return (true)\n        }\n        swal(\"warning\", \"You have entered an invalid email address!\", \"warning\")\n        return (false)\n    }\n\n    render() {\n        return (\n            <div className=\"signpage\">\n                <div className=\"container\">\n                    {/* {(this.props.value === 0) ? <h2 className=\"heading\">Student LOGIN</h2> : <h2 className=\"heading\">Teacher LOGIN</h2>} */}\n                    <div id=\"login\">\n                        {/* <div className=\"col-25\">\n                        <label htmlFor=\"fname\">Email</label>\n                    </div> */}\n                        <div className=\"col-75\">\n                            <input type=\"email\" className=\"form-alignment\" name=\"email\" placeholder=\"Email\" onChange={(e) => this.handleChange(e)} /><br /></div>\n                        {/* <div className=\"col-25\">\n                        <label htmlFor=\"fname\">Password</label>\n                    </div> */}\n\n                        <div className=\"col-75\">\n                            <input type=\"password\" className=\"form-alignment\" name=\"password\" placeholder=\"Password\" onChange={(e) => this.handleChange(e)} /><br />\n                        </div>\n\n                        <button id=\"send\" className=\"buttonstyle\" onClick={e => this.check(e)}>Login</button>\n                        <p className=\"para\">New user?</p>\n                        <button className=\"buttonstyle\"><a className=\"line\" href=\"/signup\">Signup</a></button>\n                    </div>\n\n                </div>\n            </div>\n        )\n    }\n}\nexport default withRouter(LoginDiv);"]},"metadata":{},"sourceType":"module"}